/**
 * æ‹¼å›¾æ¸¸æˆä¸‡èƒ½å¡ç‰‡å¸ƒå±€
 * 2x2 å¡ç‰‡å°ºå¯¸
 */
@Entry(LocalStorage.getShared())
@Component
struct WidgetCard {
  @LocalStorageProp('title') title: string = 'æ‹¼å›¾æ¸¸æˆ';
  @LocalStorageProp('gameMode') gameMode: string = 'äº¤æ¢æ¨¡å¼';
  @LocalStorageProp('gridSize') gridSize: string = '3Ã—3';
  @LocalStorageProp('moveCount') moveCount: number = 0;
  @LocalStorageProp('timeElapsed') timeElapsed: string = '00:00';
  @LocalStorageProp('hasActiveGame') hasActiveGame: boolean = false;

  build() {
    Column({ space: 8 }) {
      // æ ‡é¢˜æ 
      Row() {
        Text('ğŸ§©')
          .fontSize(16)
        
        Text(this.title)
          .fontSize(14)
          .fontWeight(FontWeight.Bold)
          .fontColor('#333333')
          .margin({ left: 4 })
      }
      .width('100%')
      .padding({ left: 12, right: 12, top: 8 })

      if (this.hasActiveGame) {
        // æœ‰è¿›è¡Œä¸­çš„æ¸¸æˆ
        Column({ space: 6 }) {
          // æ¸¸æˆä¿¡æ¯
          Row({ space: 12 }) {
            Column({ space: 2 }) {
              Text('æ¨¡å¼')
                .fontSize(10)
                .fontColor('#999999')
              Text(this.gameMode)
                .fontSize(12)
                .fontColor('#333333')
                .fontWeight(FontWeight.Medium)
            }
            .alignItems(HorizontalAlign.Start)

            Column({ space: 2 }) {
              Text('éš¾åº¦')
                .fontSize(10)
                .fontColor('#999999')
              Text(this.gridSize)
                .fontSize(12)
                .fontColor('#333333')
                .fontWeight(FontWeight.Medium)
            }
            .alignItems(HorizontalAlign.Start)
          }
          .width('100%')
          .padding({ left: 12, right: 12 })

          // è¿›åº¦ä¿¡æ¯
          Row({ space: 12 }) {
            Row({ space: 4 }) {
              Text('â±ï¸')
                .fontSize(12)
              Text(this.timeElapsed)
                .fontSize(12)
                .fontColor('#666666')
            }

            Row({ space: 4 }) {
              Text('ğŸ‘£')
                .fontSize(12)
              Text(`${this.moveCount}æ­¥`)
                .fontSize(12)
                .fontColor('#666666')
            }
          }
          .width('100%')
          .padding({ left: 12, right: 12 })

          // ç»§ç»­æ¸¸æˆæŒ‰é’®
          Button('ç»§ç»­æ¸¸æˆ')
            .width('90%')
            .height(32)
            .fontSize(12)
            .backgroundColor('#1890FF')
            .margin({ top: 4 })
        }
        .layoutWeight(1)
      } else {
        // æ— è¿›è¡Œä¸­çš„æ¸¸æˆ
        Column({ space: 8 }) {
          Text('æš‚æ— è¿›è¡Œä¸­çš„æ¸¸æˆ')
            .fontSize(12)
            .fontColor('#999999')

          Button('å¼€å§‹æ–°æ¸¸æˆ')
            .width('90%')
            .height(32)
            .fontSize(12)
            .backgroundColor('#52C41A')
        }
        .layoutWeight(1)
        .justifyContent(FlexAlign.Center)
      }
    }
    .width('100%')
    .height('100%')
    .backgroundColor(Color.White)
    .borderRadius(16)
  }
}

